!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash"),require("angular")):"function"==typeof define&&define.amd?define(["lodash","angular"],t):"object"==typeof exports?exports["builder.min"]=t(require("lodash"),require("angular")):e["builder.min"]=t(e.lodash,e.angular)}(window,function(e,t){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist/",a(a.s=3)}([function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r);function s(e,t){e.addPostProcess(function(e){for(var a=function(e,t){return!(void 0===e)},r=function(e,t){return!(null===e)},n=function(e){return""===e?null:e},s=0;s<e.length;s++)t.traverseForm(e[s],function(e){if(e.schema){var t={};e.schema.requiredAllowNull&&(t.requiredAllowNull=a),e.schema.failNull&&(t.failNull=r),e.$validators=_.merge({},e.$validators,t);var s=[];-1!=e.schema.type.indexOf("string")&&e.schema.nullable&&s.push(n),e.$parsers=void 0===e.$parsers?s:e.$parsers.concat(s)}});return e})}function i(e){e.setDefaultMessage("requiredAllowNull","Required"),e.setDefaultMessage("failNull","Required")}s.$inject=["postProcess","schemaForm"],i.$inject=["sfErrorMessageProvider"];var o=a(0),l=a.n(o),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=["instance_name"];function m(e,t){return d(e)?e:t+"."+e}function d(e){return l.a.includes(u,e)}function p(e,t){switch(t){case"boolean":return e.nullable&&null===e.default?null:!!e.default;case"array":return e.default?l.a.merge([],e.default):null===e.default&&e.nullable?null:void 0;case"object":return e.default?l.a.merge({},e.default):{};default:return e.default}}function f(e,t,a){l.a.isUndefined(a)||null===a||(e[t]=a)}function y(e,t,a){var r={schema:{title:e.display_name,optional:e.optional,nullable:e.nullable,description:l.a.escape(e.description)},form:{key:t.concat(e.key)}};a&&r.form.key.push("");var n=void 0;return n=e.multi&&!a?b:e.parameters&&e.parameters.length>0?v:h,l.a.merge({},r,n(e,t,a))}function h(e,t,a){var r=function(e){var t=e.toLowerCase(),a={type:[{any:"variant",integer:"integer",float:"number",boolean:"boolean",dictionary:"dictionary",string:"string",date:"integer",datetime:"integer"}[t]||"string","null"]},r={};return"date"===t?(a.format="datetime",r.options={format:"MM/DD/YYYY"}):"datetime"===t&&(a.format="datetime"),{schema:a,form:r}}(e.type),n=r.schema,s=r.form;if(f(s,"type",e.form_input_type),-1===n.type.indexOf("boolean")&&(e.optional||(n[e.nullable?"requiredAllowNull":"required"]=!0),e.nullable||(n.failNull=!0)),!a){var i=p(e,n.type);void 0!==i&&(null!==i||e.nullable)&&(n.default=i),-1!==n.type.indexOf("string")?(f(n,"maxLength",e.maximum),f(n,"minLength",e.minimum),f(n,"pattern",e.regex)):-1===n.type.indexOf("integer")&&-1===n.type.indexOf("number")||(f(n,"maximum",e.maximum),f(n,"minimum",e.minimum))}return e.choices&&!l.a.isEqual(e.choices,{})&&function(e,t,a,r){if(a.choices.display?"typeahead"===a.choices.display?t.type="typeahead":"select"===a.choices.display?t.type="select":(t.type="typeahead",console.error("Don't know how to render choices type '"+a.choices.type+"', defaulting to 'typeahead' (valid options are 'typeahead' and 'select')")):t.type="typeahead",a.choices.strict&&(t.strict=!0),"static"===a.choices.type){if(t.choices={titleMap:a.choices.value},a.choices.details&&a.choices.details.key_reference){var n=m(a.choices.details.key_reference,r);t.choices.updateOn=n,t.choices.transforms=[{lookupField:n}]}}else if("url"===a.choices.type){t.choices={updateOn:[],httpGet:{url:a.choices.details.address,queryParameterFields:{}}};for(var s=0;s<a.choices.details.args.length;s++){var i=a.choices.details.args[s],o=m(i[1],r);t.choices.updateOn.push(o),t.choices.httpGet.queryParameterFields[i[0]]=o}}else if("command"===a.choices.type){t.choices={updateOn:["instance_name"],callback:{function:"createRequestWrapper",arguments:[{command:a.choices.details.name,parameterNames:[]}],argumentFields:[]}};for(var l=0;l<a.choices.details.args.length;l++){var u=a.choices.details.args[l],p=m(u[1],r);d(p)||t.choices.updateOn.push(p),t.choices.callback.argumentFields.push(p),t.choices.callback.arguments[0].parameterNames.push(u[0])}"object"===c(a.choices.value)&&Object.assign(t.choices.callback.arguments[0],{system:a.choices.value.system,system_version:a.choices.value.system_version,instance_name:a.choices.value.instance_name})}else console.error("Don't know how to handle parameter '%s' choices type (%s)",a.key,a.choices.type);a.nullable&&"select"===t.type&&(Array.isArray(t.choices.transforms)||(t.choices.transforms=[]),t.choices.transforms.push("fixNull"))}(0,s,e,t),{schema:n,form:s}}function b(e,t){var a=y(e,t,!0);delete a.schema.default,a.form.notitle=!0,a.form.htmlClass="clear-right",delete a.schema.description,"object"===a.schema.type&&(a.schema.nullable=!1);var r={schema:{type:["array","null"],items:a.schema},form:{startEmpty:!!e.nullable,items:[a.form]}},n=p(e,"array");return void 0!==n&&(r.schema.default=n,r.form.startEmpty=!0),f(r.schema,"maxItems",e.maximum),f(r.schema,"minItems",e.minimum),r}function v(e,t,a){var r=g(e,a?t.concat(e.key,""):t.concat(e.key)),n=p(e,"object"),s={},i={type:"object",partition:"!optional",accordionHeading:"Optional Fields",properties:r.schema};return e.optional&&e.nullable&&l.a.isEqual({},n)&&!a?i.format="nullable":(i.default=n,s.items=r.form),{schema:i,form:s}}function g(e,t){for(var a={},r=[],n=0,s=e.parameters.length;n<s;n++){var i=e.parameters[n],o=i.key,l=y(i,t);a[o]=l.schema,r.push(l.form)}return{schema:a,form:r}}n.a.module("beer-garden.builder",[]).run(s).config(i).factory("SFBuilderService",function(){var e={};return e.build=function(e,t){var a=g(t,["parameters"]),r=void 0,n=void 0;if(r=void 0===t.schema||l.a.isEqual({},t.schema)?{type:"object",properties:a.schema}:{type:"object",properties:t.schema},void 0===t.form||l.a.isEqual({},t.form)||l.a.isEqual([],t.form)){n=[];var s=[],i=[],o=!0,c=!1,u=void 0;try{for(var m,d=a.form[Symbol.iterator]();!(o=(m=d.next()).done);o=!0){var p=m.value,f="string"==typeof p?p:p.key;f="string"==typeof f?parse(f):f,r.properties[f[f.length-1]].optional?i.push(p):s.push(p)}}catch(e){c=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(c)throw u}}i.length?(s.length||s.push({type:"help",helpvalue:'<div uib-alert class="alert alert-info m-b-0">None! :)</div>'}),n.push({type:"tabs",tabs:[{title:"Required Fields",items:s},{title:"Optional Fields",items:i}]})):n=s}else n=Array.isArray(t.form)?t.form:[t.form];var y=function(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var i,o=e.instances[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value;a.push(l.name)}}catch(e){n=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}var c={system:{title:"System Name",type:"string",default:e.name,required:!0},system_version:{title:"System Version",type:"string",default:e.version,required:!0},command:{title:"Command Name",type:"string",default:t.name,required:!0},comment:{title:"Comment",type:"string",default:"",required:!1,maxLength:140,validationMessage:"Maximum comment length is 140 characters"},output_type:{title:"Output Type",type:"string",default:t.output_type,required:!1},instance_name:{title:"Instance Name",type:"string",required:!0}};return 1==e.instances.length&&(c.instance_name.default=a[0],c.instance_name.readonly=!0),{schema:c,form:{type:"fieldset",items:[{type:"help",helpvalue:"<hr>"},{type:"section",htmlClass:"row",items:[{key:"system",feedback:!1,disableSuccessState:!0,disableErrorState:!0,readonly:!0,required:!0,htmlClass:"col-md-3"},{key:"system_version",feedback:!1,disableSuccessState:!0,disableErrorState:!0,readonly:!0,required:!0,htmlClass:"col-md-3"},{key:"command",feedback:!1,disableSuccessState:!0,disableErrorState:!0,readonly:!0,required:!0,htmlClass:"col-md-3"},{key:"instance_name",feedback:!1,disableSuccessState:!0,htmlClass:"col-md-3",type:"select",choices:{titleMap:a}}]},{key:"comment",type:"textarea",feedback:!0,disableSuccessState:!1,disableErrorState:!1,readonly:!1,required:!1,fieldHtmlClass:"m-b-3"},{type:"help",helpvalue:'<div uib-alert class="alert alert-warning m-b-0">Instance is not RUNNING, but you can still "Make Request"</div><br>',condition:"checkInstance(instance_name)"},{type:"section",htmlClass:"row",items:[{type:"button",style:"btn-warning w-100 ",title:"Reset",onClick:"reset(ngform, model, system, command.data)",htmlClass:"col-md-2"},{type:"submit",style:"btn-primary w-100",title:"Make Request",htmlClass:"col-md-10"}]}]}}}(e,t);return y.schema.parameters=r,{schema:{type:"object",properties:y.schema},form:n.concat(y.form)}},e});t.default="beer-garden.builder"},function(e,t,a){e.exports=a(2)}])});